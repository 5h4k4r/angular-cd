# name: Publish Docker image

# on:
#   push:
#     branches:
#       - main
#     paths-ignore:
#       - "*.md"
#       - ".vscode/**"
# concurrency:
#   group: deploy-main
#   cancel-in-progress: true

# jobs:
#   push-to-docker:
#     name: Push Docker image to Docker Hub
#     runs-on: ubuntu-latest
#     steps:
#       - name: Check out the repo
#         uses: actions/checkout@v3

#       - name: Log in to Docker Hub
#         uses: docker/login-action@v2
#         with:
#           username: ${{ secrets.DOCKER_USERNAME }}
#           password: ${{ secrets.DOCKER_PASSWORD }}

#       - name: Build and push Docker image
#         uses: docker/build-push-action@v2
#         with:
#           push: true
#           tags: |-
#             ${{ secrets.DOCKER_USERNAME }}/angular-k8s:latest
#             ${{ secrets.DOCKER_USERNAME }}/angular-k8s:${{ github.sha }}
#             ${{ secrets.DOCKER_USERNAME }}/angular-k8s:${{ github.ref_name }}
#   deploy:
#     uses: 5h4k4r/angular-app/.github/workflows/deploy-base.yaml@main
#     needs: push-to-docker
#     with:
#       image: $GITHUB_SHA
#       env_name: prod
#     secrets:
#       KUBECONFIG: ${{ secrets.KUBECONFIG }}
